<div class="d-flex align-items-center justify-content-between mb-3">
  <h1 class="h3 mb-0">Admin: Kode Beli</h1>
  <a href="/admin/licenses/new" class="btn btn-primary btn-sm">Tambah Kode</a>
</div>
<table class="table table-hover align-middle">
  <thead>
    <tr>
      <th>No</th>
      <th>Kode</th>
      <th>Status</th>
      <th>Catatan</th>
      <th>Dibuat</th>
      <th>Dipakai</th>
      <th>Aksi</th>
    </tr>
  </thead>
  <tbody>
    <% let i = 0; licenses.forEach(l => { i++; %>
      <tr>
        <td><%= i %></td>
        <td><code><%= l.code %></code></td>
        <td><span class="badge bg-<%= l.status === 'active' ? 'success' : l.status === 'revoked' ? 'danger' : 'secondary' %>"><%= l.status %></span></td>
        <td><%= l.note || '-' %></td>
        <td><%= new Date(l.created_at).toLocaleString('id-ID') %></td>
        <td><%= l.used_at ? new Date(l.used_at).toLocaleString('id-ID') : '-' %></td>
        <td>
          <% if (l.status !== 'revoked') { %>
            <form method="POST" action="/admin/licenses/<%= l.id %>/revoke" onsubmit="return confirm('Revoke kode ini?');">
              <input type="hidden" name="_csrf" value="<%= csrfToken %>">
              <button class="btn btn-sm btn-outline-danger">Revoke</button>
            </form>
          <% } else { %>
            <span class="text-muted">-</span>
          <% } %>
        </td>
      </tr>
    <% }) %>
  </tbody>
 </table>